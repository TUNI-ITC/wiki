
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../sauna-machines-tips-and-tricks/">
      
      
        <link rel="next" href="../version_control/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>TUNI TCSC Cluster - Tampere University ITC Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tuni-tcsc-cluster" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Tampere University ITC Wiki" class="md-header__button md-logo" aria-label="Tampere University ITC Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tampere University ITC Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TUNI TCSC Cluster
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tampere University ITC Wiki" class="md-nav__button md-logo" aria-label="Tampere University ITC Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Tampere University ITC Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Meta
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Meta
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Meta/how-to-contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Contribute to This Wiki?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Technical Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Technical Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Distributed_dataparallel_pytorch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed data parallel training using Pytorch on the multiple nodes of CSC and Narvi clusters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automatically-submit-your-job-to-puhti-or-mahti/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    An automation script to run your job to Puhti or Mahti
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_LUMI_python_envs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up Python environments on LUMI: Or why you shouldn't use the LUMI container wrapper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-set-up-remote-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Set up Remote Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install-tuni-vpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install TUNI VPN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sauna-machines-tips-and-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Best Practices, Tips and Tricks for SAUNA Machines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    TUNI TCSC Cluster
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    TUNI TCSC Cluster
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-get-an-account" class="md-nav__link">
    <span class="md-ellipsis">
      How to Get an Account?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-check-the-queue" class="md-nav__link">
    <span class="md-ellipsis">
      How to Check the Queue
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-a-job" class="md-nav__link">
    <span class="md-ellipsis">
      How to Run a Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cancel-my-job" class="md-nav__link">
    <span class="md-ellipsis">
      How to Cancel My Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-transfer-data" class="md-nav__link">
    <span class="md-ellipsis">
      How to Transfer Data?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-install-my-software" class="md-nav__link">
    <span class="md-ellipsis">
      How Do I Install My Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Do I Install My Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slurm-modules-best-option" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm modules (best option)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-avoid-if-you-can" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda (avoid if you can)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Conda (avoid if you can)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-conda-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a conda Environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-and-existing-modules-better-than-only-conda" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda and existing modules (Better than only Conda)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-python-virtual-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Using Python virtual environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Using containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../version_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wireless connections
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    University Bureaucracy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            University Bureaucracy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/cs_curricula/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computing Sciences Curricula
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/employee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make a work contract request
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/msc_thesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MSc Thesis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/phd_thesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PhD Thesis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    X Outdated
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            X Outdated
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../X-Outdated/tuni-narvi-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TUNI Narvi Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-get-an-account" class="md-nav__link">
    <span class="md-ellipsis">
      How to Get an Account?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-check-the-queue" class="md-nav__link">
    <span class="md-ellipsis">
      How to Check the Queue
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-a-job" class="md-nav__link">
    <span class="md-ellipsis">
      How to Run a Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cancel-my-job" class="md-nav__link">
    <span class="md-ellipsis">
      How to Cancel My Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-transfer-data" class="md-nav__link">
    <span class="md-ellipsis">
      How to Transfer Data?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-install-my-software" class="md-nav__link">
    <span class="md-ellipsis">
      How Do I Install My Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Do I Install My Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slurm-modules-best-option" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm modules (best option)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-avoid-if-you-can" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda (avoid if you can)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Conda (avoid if you can)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-conda-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a conda Environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-and-existing-modules-better-than-only-conda" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda and existing modules (Better than only Conda)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-python-virtual-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Using Python virtual environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Using containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="tuni-tcsc-cluster">TUNI TCSC Cluster</h1>
<p><em>This guide is based on similar one made for the previous TUNI cluster Narvi and can be found from X Files of this Wiki (<a href="../../X-Outdated/tuni-narvi-cluster/">TUNI Narvi Cluster</a>)</em></p>
<p>This document describes how to use the <code>TUNI TCSC</code> computing cluster.</p>
<div class="admonition question">
<p class="admonition-title">What is TCSC?</p>
<ul>
<li>Narvi is the SLURM cluster that substituted the old Narvi cluster in 2025 (that replaced even older Merope cluster in 2017).</li>
<li>The cluster is used by researchers, faculty members, and students at Tampere University.</li>
<li>There are powerful CPU-only (e.g. Xeon) and GPU nodes (e.g. 4xV100 and 8xH200) - details about available resources can be found from the <a href="https://www.tuni.fi/en/research/tampere-center-scientific-computing-tcsc">TCSC Web page</a>.</li>
</ul>
</div>
<h2 id="how-to-get-an-account">How to Get an Account?</h2>
<p>The user rights are granted per research team and maintained by the team leader (PI). Details about obtaining the rights is found from <a href="https://intra.tuni.fi/en/it-services/it-research/storing-and-processing-research-data-0/tcsc-high-performance-computing-cluster">TUNI Intranet</a> and it can take several days.</p>
<p>Once you have the accounts ready, you can access the computing resources through a dedicated Web interface or old-fashioned using terminal with ssh. Note that outside the campus network VPN connectin can be needed.</p>
<h2 id="how-to-check-the-queue">How to Check the Queue</h2>
<p>To see the status of the queue, type
<div class="highlight"><pre><span></span><code>squeue
<span class="c1"># for a specific partitions (e.g. `test`).</span>
squeue<span class="w"> </span>-p<span class="w"> </span><span class="nb">test</span>
<span class="c1"># for a specific user</span>
squeue<span class="w"> </span>-u<span class="w"> </span>&lt;user&gt;
</code></pre></div></p>
<p>Available job queues are listed in the internal <a href="https://tuni.atlassian.net/wiki/spaces/TCSC/pages/332562812/Available+batch+job+partitions">TCSC wiki</a> (access is limited).</p>
<h2 id="how-to-run-a-job">How to Run a Job</h2>
<p><em>Remember: do not use the login node for computation – it is slow and will degrade the performance of the login node for other users!</em></p>
<p>There are two common ways to run a job at a <code>slurm</code> cluster:</p>
<ul>
<li><code>srun</code></li>
<li><code>sbatch</code></li>
</ul>
<p>The main difference is that <code>srun</code> is interactive which means the terminal will be attached to the current session. The experience is just like with any other command in your terminal. Note, that when the queue is full you will have to wait until you get resources.</p>
<p>If you use <code>sbatch</code>, you submit your job to the slurm queue and get your terminal back; you can disconnect, kill your terminal, etc. with no consequence. In the case of <code>srun</code>, killing the terminal would kill the job. Hence, <code>sbatch</code> is recommended.</p>
<p>Here is the example <code>srun</code> command which will ask the cluster to start an interactive shell with 1 GPU (<code>--gres</code>) and 10 CPUs (<code>--cpus-per-task</code>), 10 GB of RAM (<code>--mem-per-cpu</code>) that will be available to you for 30 minutes (<code>--time</code>):
<div class="highlight"><pre><span></span><code>srun \
    --pty \
    --job-name pepe_run \
    --partition gpu \
    --gres gpu:1 \
    --mem-per-cpu 1G \
    --ntasks 1 \
    --cpus-per-task 10 \
    --time 00:30:00 \
    /bin/bash -i
</code></pre></div></p>
<p>and this is an example <code>sbatch</code> command which will ask the cluster to run <code>my_script.sh</code> with 1 GPU and 10 CPUs, 10 GB of RAM that will run for at most 30 minutes (if the script has finished execution the job will be ended), the output and error logs will be saved to <code>log_JOBID.txt</code> (<code>--output</code>, <code>--error</code>):
<div class="highlight"><pre><span></span><code>sbatch \
    --job-name pepe_run \
    --partition gpu \
    --gres gpu:1 \
    --mem-per-cpu 1g \
    --ntasks 1 \
    --cpus-per-task 10 \
    --time 00:30:00 \
    --output log_%j.txt \
    --error log_%j.txt \
    my_script.sh
</code></pre></div>
you may also use <code>--constraint='kepler|pascal|volta'</code> in order to select a specific gpu architecture.</p>
<p>Instead of specifying the resources and other information as command-line arguments, you may find it useful to list them inside of <code>my_script.sh</code> and then just use <code>sbatch my_script.sh</code>:
<div class="highlight"><pre><span></span><code>#!/bin/bash
#SBATCH --job-name=pepe_run
#SBATCH --gres=gpu:1
#SBATCH --time=00:30:00
# and so on. To comment SBATCH entry use `##SBATCH --arg ...`
# here starts your script
</code></pre></div></p>
<p>To learn more <code>sbatch</code> hacks, a reader is also referred to <a href="https://www.arch.jhu.edu/short-tutorial-how-to-create-a-slurm-script/">this nice tutorial</a>.</p>
<h2 id="how-to-cancel-my-job">How to Cancel My Job</h2>
<p>To cancel a specific job you are running, use
<div class="highlight"><pre><span></span><code>scancel<span class="w"> </span>&lt;JobID&gt;
</code></pre></div></p>
<h2 id="how-to-transfer-data">How to Transfer Data?</h2>
<p>The simplest way is to use <code>scp</code> command
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>-r<span class="w"> </span>./folder<span class="w"> </span>user@xxxx.tuni.fi:/my/path/
</code></pre></div>
where <code>-r</code> means to copy the folder with all files in it.</p>
<p>However, once the internet connection is interrupted you will need to start all over again. To have an opportunity to resume the data transfer try <code>rsync</code> instead
<div class="highlight"><pre><span></span><code>rsync<span class="w"> </span>-ahP<span class="w"> </span>./folder<span class="w"> </span>user@xxxx.tuni.fi:/my/path/
</code></pre></div>
where <code>-ah</code> means to preserve permissions symlinks, etc as in the original folder and <code>h</code> makes the progress "human-readable", and <code>P</code> allows to continue data transfer (sends missing files on the target path 🤓).</p>
<div class="admonition warning">
<p class="admonition-title">Trailing <code>/</code> in <code>rsync</code> makes the difference</p>
<ul>
<li><code>rsync /dir1/dir2/ /home/dir3</code> - copies the contents of <code>/dir1/dir2</code> but not the <code>dir2</code> folder itself.</li>
<li><code>rsync /dir1/dir2 /home/dir3</code> – copies the folder <code>dir2</code> along with all its contents.</li>
</ul>
</div>
<p>If you would like to see the files from a remote machine you may mount the folder locally. On Ubuntu/Debian install <code>sshfs</code> and run this
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>narvi_folder
sshfs<span class="w"> </span>user@xxx.tuni.fi:/my/folder/<span class="w"> </span>./my_folder
</code></pre></div>
the content of the <code>/my/folder</code> will be shown in <code>./my_folder</code>. Mind that the changes in either folder will be reflected in another one.</p>
<p>To unmount the folder use
<div class="highlight"><pre><span></span><code>umount<span class="w"> </span>./my_folder
</code></pre></div></p>
<h2 id="how-do-i-install-my-software">How Do I Install My Software</h2>
<h3 id="slurm-modules-best-option">Slurm modules (best option)</h3>
<p>Before you install own software, check if the software you would like to install is already installed by the admin (e.g. matlab, cuda, and gcc). These are set up using <code>module</code> functionality. You can load a module by specifying <code>module load &lt;mod&gt;</code> inside of your script. To see all available modules run <code>module avail</code>.</p>
<p>Examples are given in the <a href="https://tuni.atlassian.net/wiki/spaces/TCSC/pages/332562768/Module+environment">TCSC internal Wiki</a>, and a good tutorial is provided by CSC in their <a href="https://a3s.fi/CSC_training/04_modules.html#/module-systems-in-supercomputers">Slurm Modules tutorial slide set</a>.</p>
<p>If you are not satisfied with the selection you can install your own. Below are several options how to do that.</p>
<h3 id="using-conda-avoid-if-you-can">Using Conda (avoid if you can)</h3>
<p>Conda allows you to</p>
<ul>
<li>Fully control what software packages are installed</li>
<li>Have own <em>environments</em> for different projects</li>
<li>Copy environments from your computer to a TCSC computing node</li>
</ul>
<p>However, using conda <strong>is not recommended</strong> since</p>
<ul>
<li><font color="red">Problems to use together with Slurm modules</font></li>
<li><font color="red">sbatch startup can be slow</font> - read more from <a href="https://docs.csc.fi/support/tutorials/conda/">CSC best practices for Conda</a></li>
</ul>
<div class="admonition tip">
<p class="admonition-title"><code>conda</code> Has Many Linux Tools</p>
<p>Besides a ton of <code>Python</code> packages, <code>conda</code> has surprisingly many common Linux tools, e.g. <code>tmux</code>, <code>htop</code>, <code>ffmpeg</code>, <code>vim</code>, and more. This is especially useful if you would like to install them but do not have <code>sudo</code> rights.</p>
</div>
<h4 id="creating-a-conda-environment">Creating a <code>conda</code> Environment</h4>
<p>Minimal Conda is available in the <em>miniforge</em> package, log in the tcsc computer and load the module
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>miniforge3/24.9.0
</code></pre></div></p>
<p>Let's start by creating an empty conda environment
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>my_env
</code></pre></div></p>
<p>Activate it (meaning that all binaries installed in this environment will be used instead of the system-wise packages)
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>activate<span class="w"> </span>my_env
<span class="c1"># if it didn&#39;t work try `source activate my_env`</span>
</code></pre></div></p>
<p>Afterward, you can install <code>conda</code> packages
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>install<span class="w"> </span>python<span class="w"> </span>pip<span class="w"> </span>matplotlib<span class="w"> </span>scikit-learn
</code></pre></div></p>
<p>If default <code>conda</code> channels don't have some package you search for other <code>conda</code> channels:
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>install<span class="w"> </span>dlib<span class="w"> </span>--channel<span class="o">=</span>menpo
</code></pre></div></p>
<p>If your favorite package is not available anywhere in <code>conda</code> <em>OR you would like to install <code>OpenCV</code></em>, try to install it via <code>pip</code>:
<div class="highlight"><pre><span></span><code><span class="c1"># check if you are using the `pip` from your `conda` env</span>
which<span class="w"> </span>pip
pip<span class="w"> </span>install<span class="w"> </span>opencv-python
</code></pre></div></p>
<details class="question">
<summary><code>conda</code> vs <code>pip</code> inside of <code>conda</code> env?</summary>
<p>According to <a href="https://www.anaconda.com/blog/using-pip-in-a-conda-environment">official anaconda documentation</a>, you should install as many requirements as possible with <code>conda</code>, then use <code>pip</code>.
Another problem with <code>pip</code> packages inside of <code>conda</code> is associated with poor dependence handling and just bad experience when trying to replicate the same environment on another machine.</p>
</details>
<p>Alternatively, if you have an existing Conda environment for your code, it can be exported
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>activate<span class="w"> </span>my_env
conda<span class="w"> </span>env<span class="w"> </span><span class="nb">export</span><span class="w"> </span>&gt;<span class="w"> </span>my_env.yml
</code></pre></div>
The yml file is transferred to the TCSC computer where it can be used to install the same environment:
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>miniforge3/24.9.0
conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>my_env.yml
<span class="c1"># This can take long</span>
conda<span class="w"> </span>activate<span class="w"> </span>my_env
</code></pre></div></p>
<p>Several guides could be useful:</p>
<ul>
<li>Problems to run Conda with sbatch - <a href="https://saturncloud.io/blog/activating-conda-environments-from-scripts-a-guide-for-data-scientists/">Activating Conda Environments from Scripts: A Guide for Data Scientists</a></li>
<li><a href="https://docs.csc.fi/support/tutorials/conda/">Conda best practices for CSC supercomputers</a></li>
</ul>
<h3 id="using-conda-and-existing-modules-better-than-only-conda">Using Conda and existing modules (Better than only Conda)</h3>
<p><font color="red">Someone must write</font></p>
<h3 id="using-python-virtual-environment">Using Python virtual environment</h3>
<p><font color="red">Someone must write</font></p>
<h3 id="using-containers">Using containers</h3>
<p><font color="red">Someone must write</font></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>