
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../custom_LUMI_python_envs/">
      
      
        <link rel="next" href="../install-tuni-vpn/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>How to Set up Remote Access - Tampere University ITC Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-set-up-remote-access" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Tampere University ITC Wiki" class="md-header__button md-logo" aria-label="Tampere University ITC Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tampere University ITC Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to Set up Remote Access
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tampere University ITC Wiki" class="md-nav__button md-logo" aria-label="Tampere University ITC Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Tampere University ITC Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Meta
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Meta
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Meta/how-to-contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Contribute to This Wiki?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Technical Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Technical Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Distributed_dataparallel_pytorch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed data parallel training using Pytorch on the multiple nodes of CSC and Narvi clusters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automatically-submit-your-job-to-puhti-or-mahti/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    An automation script to run your job to Puhti or Mahti
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_LUMI_python_envs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up Python environments on LUMI: Or why you shouldn't use the LUMI container wrapper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    How to Set up Remote Access
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    How to Set up Remote Access
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-the-host-eg-compute-machine" class="md-nav__link">
    <span class="md-ellipsis">
      How to Set up the Host (e.g. compute machine)?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-the-client-eg-your-laptop" class="md-nav__link">
    <span class="md-ellipsis">
      How to Set up the Client (e.g. your laptop)?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to Set up the Client (e.g. your laptop)?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-how-to-set-up-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) How to Set up SSH Keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install-tuni-vpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install TUNI VPN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sauna-machines-tips-and-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Best Practices, Tips and Tricks for SAUNA Machines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tuni-tcsc-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TUNI TCSC Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../version_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wireless connections
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    University Bureaucracy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            University Bureaucracy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/cs_curricula/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computing Sciences Curricula
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/employee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make a work contract request
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/msc_thesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MSc Thesis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../University-Bureaucracy/phd_thesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PhD Thesis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    X Outdated
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            X Outdated
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../X-Outdated/tuni-narvi-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TUNI Narvi Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-the-host-eg-compute-machine" class="md-nav__link">
    <span class="md-ellipsis">
      How to Set up the Host (e.g. compute machine)?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-the-client-eg-your-laptop" class="md-nav__link">
    <span class="md-ellipsis">
      How to Set up the Client (e.g. your laptop)?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to Set up the Client (e.g. your laptop)?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-how-to-set-up-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) How to Set up SSH Keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="how-to-set-up-remote-access">How to Set up Remote Access</h1>
<p><em>This is the guide for setting up the remote connection to your office machine and it will not tell you how to set up the machine itself (e.g. install Ubuntu, allocate disk space). If you would like some guidance on this topic, for example, you would want to make your remote machine to "look" like the rest of our machines, please refer to <a href="https://github.com/v-iashin/TuniSurvivalKit/blob/master/how_to_setup_a_desktop.md">this unofficial guide</a> – also, let us know if it was useful and whether the wiki might benefit from having it here.</em></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since this guide relies on <code>ssh-forward.tuni.fi</code> as a proxy server, you may only
set up the remote connection if you are a <strong>staff member</strong> of the university, i.e.
a student cannot apply for access to <code>ssh-forward.tuni.fi</code>.
If you are a student, please contact the IT-Helpdesk and ask if they can
give you access to <code>ssh-forward.tuni.fi</code>.</p>
</div>
<p>A bit of motivation and how it will work. There is no <em>official</em> way of conneting remotely to a self-maintained machine. Here is how we can work around this problem. Your compute machine can be added to a research network <code>pit.cs.tut.fi</code> which practically means that it will have a fixed IP (or FQDN) and you will not need to type your credentials every 24 hours. However, another problem here is that this research network can only be reachable using university-maintained devices which uses a university WiFi or a pre-installed VPN. The solution to this problem is to use a proxy ssh-server (<code>ssh-forward.tuni.fi</code>) when connecting to your machine. This ssh-forwarding server is open to the public internet and from there you can reach <code>pit.cs.tut.fi</code>.</p>
<p>We assume that you have an Linux desktop (<strong>host</strong>) at your office and you would like to access it remotely from any device, e.g. your laptop (<strong>client</strong>). Here we provide both: how to setup the host and the client sides. If the host is already set up and you would like to just learn how to connect to it, <a href="#how-to-set-up-the-client-eg-your-laptop">follow the guide for a client</a>.</p>
<h2 id="how-to-set-up-the-host-eg-compute-machine">How to Set up the <strong>Host</strong> (e.g. compute machine)?</h2>
<ol>
<li>Email <code>it-helpdesk@tuni.fi</code> and ask them to connect your office machine to <code>pit.cs.tut.fi</code> network. They will assign a fixed IP/FQDN and you will not need to type your credentials every 24 hours to have an internet connection. Specify the following information:<ul>
<li>the inventory number of the machine (on the sticker),</li>
<li>MAC address of the socket in the machine you would like to use for the wired connection to the internet (you may have several Ethernet ports – you need only one),</li>
<li>mention the Ethernet socket number from the wall that you will use.</li>
</ul>
</li>
<li>At this point, you should have had received the response from <code>it-helpdesk@tuni.fi</code> and be able to connect to the internet using the socket you specified. If so, check your IP and type <code>host your_IP</code> in your terminal to find out the FQDN of the machine. In our case, it was be something like <code>&lt;IP.reversed&gt; pointed to **********.pit.cs.tut.fi</code>.</li>
<li>Install <code>openssh-server</code> package on your host machine (via e.g. <code>sudo apt-get install openssh-server</code>). This will allow <code>ssh</code> connection to this machine.</li>
<li>Next, make sure <strong>no</strong> WiFi connection connects automatically after the startup. On Ubuntu, type <code>sudo nm-connection-editor</code> in your terminal (or just go to <code>Edit connection</code> from the status menu on Ubuntu 16.04).</li>
<li>Also, allow your connection (by default called <code>Wired connection</code>) to automatically connect when available.</li>
</ol>
<p>Now your machine (<strong>host</strong>) should be reachable from TUNI-maintained computers connected to <code>TUNI-STAFF</code> WiFi or a pre-installed VPN directly via <code>ssh user@**********.pit.cs.tut.fi</code>. If you are using a non-university computer, you need to use the ssh-forwarding server (<code>ssh-forward.tuni.fi</code>) to reach <code>pit.cs.tut.fi</code>. Use the following guide to set up the connection to the forwarding server.</p>
<h2 id="how-to-set-up-the-client-eg-your-laptop">How to Set up the <strong>Client</strong> (e.g. your laptop)?</h2>
<p>Even though university-maintained devices can reach <code>pit.cs.tut.fi</code> without any proxy from university premises, we found that using the proxy even on university-maintained devices provides a more uniform experience. Otherwise you need to keep in mind which network you are using each time you ssh to your machine and adjust the CLI command accordingly (see the tip in the end of this section on how to configure an <code>ssh</code> command to use proxy by default when connecting to a specific device).</p>
<ol>
<li>To connect to your compute machine from a self-maintained/personal device, you need to get access to the ssh-forwarding server <code>ssh-forward.tuni.fi</code>. For this, proceed to <a href="https://id.tuni.fi/idm/?uiLang=en">id.tuni.fi/idm</a> -&gt; <code>My user rights</code> -&gt; <code>Apply for a new user right</code> -&gt; if required, select your <em>Staff</em> contract -&gt; search for <code>Linux Servers (LINUX-SERVERS) Personnel SSH tunneling service</code> and select it. In <code>Application details</code> put something like <code>For pit.cs.tut.fi connections</code>. Then, go to the <code>Applications</code> tab and wait until the access is granted (1 min).</li>
<li><code>ssh-forward.tuni.fi</code> is open to the public internet and it requires 2-factor authentication. For this, log in to the forwarding server using your TUNI credentials (<code>ssh tuni_user@ssh-forward.tuni.fi</code>) <strong>while being connected to one of the University networks (<code>roam.fi/eduroam/TUNI-STAFF</code> or a university VPN). If 2FA was not initialized, it will reject your password. Unfortunately, you cannot initialize 2-factor authentication from any network. You need to be physically at University and be connected to one of the networks there</strong>.</li>
<li>Once you logged in to <code>ssh-forward.tuni.fi</code>, type <code>google-authenticator</code>. It will ask you several questions and show a QR code (resize your window to see it). Answer the questions as follows:<ul>
<li><code>Do you want authentication tokens to be time-based...</code> -&gt; y</li>
<li><code>Do you want me to update your "/home/user/...google_authenticator" file</code> -&gt; y</li>
<li><code>Do you want to disallow multiple uses...</code> -&gt; n</li>
<li><code>By default, tokens are good for 30 seconds...</code> -&gt; n</li>
<li><code>If the computer that you are logging into...</code> -&gt; y</li>
</ul>
</li>
<li>Once QR code is shown, install some 2-factor authenticator app on your smartphone if you don't have one yet e.g. from <a href="https://www.microsoft.com/en-us/account/authenticator">Microsoft</a>, <a href="https://authy.com/">Authy</a>, or <a href="https://www.google.com/search?q=Google+Authenticator+apple+android">Google</a>. The app will be used for two-step authentication when you connect from a non-university network is used e.g. your home internet. Once it is done, it will create an entry with a 6-digit passcode which changes every 30 secs.</li>
<li>Test your 2FA by trying to connect to <code>ssh-forward.tuni.fi</code> from a non-university network (e.g. using internet shared from your cell-phone) (<code>ssh your_tuni_username@ssh-forward.tuni.fi</code>).</li>
<li>Now you can connect to your machine from your local terminal jumping through the ssh proxy. Here is a convenient command: <code>ssh -J your_tuni_username@ssh-forward.tuni.fi your_host_username@*********.pit.cs.tut.fi</code> (<code>-J</code> means "jump" using the specified proxy)<ul>
<li>If you are on a University network (<code>roam.fi/eduroam/TUNI-STAFF</code> or VPN), it will only ask for your TUNI and host passwords;</li>
<li>If you are using a non-University network, it will first ask you for a <code>Verification code</code> which is a temporal code from the 2FA app you installed on your smartphone. Then, you will need to type your TUNI and host passwords.</li>
</ul>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Config the <code>ssh</code> connection in <code>~/.ssh/config</code>:
<div class="highlight"><pre><span></span><code><span class="n">Host</span> <span class="n">connection_name</span>
  <span class="n">HostName</span> <span class="o">***********.</span><span class="n">pit</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">tut</span><span class="o">.</span><span class="n">fi</span>
  <span class="n">User</span> <span class="n">your_host_username</span>
  <span class="n">ProxyCommand</span> <span class="n">ssh</span> <span class="n">your</span><span class="o">-</span><span class="n">tuni</span><span class="o">-</span><span class="n">username</span><span class="nd">@ssh</span><span class="o">-</span><span class="n">forward</span><span class="o">.</span><span class="n">tuni</span><span class="o">.</span><span class="n">fi</span> <span class="o">-</span><span class="n">W</span> <span class="o">%</span><span class="n">h</span><span class="p">:</span><span class="o">%</span><span class="n">p</span>
</code></pre></div>
After doing this, you will be able to do <code>ssh connection_name</code> to <code>ssh</code> directly to <code>*********.pit.cs.tut.fi</code>, forward ports, and transfer large files using <code>scp/rsync</code>. It is also useful if you are using <code>VSCode</code> or any other text editor which supports remote development. Additionally, it is handy if you would like to mount folders from the host to your client. You can use <code>sshfs connection_name:/path/to/remote_folder /path/to/local_folder</code>.</p>
</div>
<h3 id="optional-how-to-set-up-ssh-keys">(Optional) How to Set up SSH Keys</h3>
<p>To avoid needing to constantly give your TUNI password to the proxy server and host password when connecting to your SAUNA machine, your SSH key pair should be set up. An SSH key is a cryptographic key used for secure, authenticated access to a remote server. The SSH key pair consists of a <em>private</em> key, stored on your local machine, and a <em>public</em> key which is added to the remote server. Never share your private key. Use the following instructions to set up your SSH keys for your SAUNA machine.</p>
<ol>
<li>Generate your SSH key-pair on your local machine. Identify with your email <code>ssh-keygen -t ed25519 -C "your_email@example.com"</code>. Press the <strong>enter</strong> key at each of the questions.</li>
<li>Add your public key to the forwarding server with command <code>ssh-copy-id your_tuni_username@ssh-forward.tuni.fi</code>. This will require your TUNI password once.</li>
<li>Test that it worked (no password should be required for this login) <code>ssh your_tuni_username@ssh-forward.tuni.fi</code>. Return to local machine with <code>exit</code>.</li>
<li>
<p>Now, we do the same to the SAUNA machine. Follow the steps below depending on if you have set up your <code>~/.ssh/config</code>.</p>
<p>a. (RECOMMENDED) Requires the outcome of the above tip regarding your <code>~/.ssh/config</code> file. Add your public key to the SAUNA machine with the command <code>ssh-copy-id &lt;connection_name&gt;</code>, where <code>connection_name</code> was set in the tip above in your <code>~/.ssh/config</code>. You will need to give the host password once.</p>
<p>b. (NOT RECOMMENDED) Alternatively, when using the long command above, we need to copy the public key manually. You can find the name of your public key file with <code>ls ~/.ssh/*.pub</code>. However, with the generation command in these instructions it would be <code>id_ed25519.pub</code>. Now, copy your public key to the SAUNA machine with the command:
<div class="highlight"><pre><span></span><code>cat ~/.ssh/&lt;name_of_public_key_file&gt;.pub | ssh -J your_tuni_username@ssh-forward.tuni.fi your_host_username@*********.pit.cs.tut.fi &#39;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&#39;
</code></pre></div>
It will ask the host passwork once. Then you can test if it worked by running the long command <code>ssh-copy-id -J your_tuni_username@ssh-forward.tuni.fi your_host_username@*********.pit.cs.tut.fi</code>. Now it should not ask for the host password.</p>
</li>
</ol>
<p>If everything went as it should, now connecting to your SAUNA machine should not require any passwords in terminal, VSCode, etc.</p>
<h2 id="known-issues">Known Issues</h2>
<ul>
<li>At the moment, only a staff member (doctorate students are staff members usually) can use
<code>ssh-forward.tuni.fi</code> proxy and, therefore, benefit from this set up. Please, let us know if you found
a way around it.</li>
<li>You will need to contact <code>it-helpdesk@tuni.fi</code> and ask to activate and configure your wall internet socket in a special way. This might take some time.</li>
<li>Depending on the network you are using, a different log in procedure will be required: only your TUNI password if you are connected to <code>roam.fi/eduroam/TUNI-STAFF</code>; and 2FA + your TUNI and host-machine passwords  on other networks.</li>
<li><code>ssh-forward.tuni.fi</code> has very limited disk space for each user (few MB). Therefore, can only be used as a proxy for your <code>ssh</code> connection <em>which is its main purpose</em>.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>